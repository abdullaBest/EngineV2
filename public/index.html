<!DOCTYPE html>
<html>
	<head>
		<title>Engine</title>
		<meta charset="utf-8">
        <link rel="icon" href="i/favicon96.png" type="image/png" sizes="96x96" >
		<link rel="stylesheet" href="css/main.css">
		<script type="module" src="js/main.js?ver=0.001"></script>
	</head>
    <body>
        <canvas id="CANVAS" width="800" height="600"></canvas>
        
        <div id="WAIT">
            wait...
        </div>

        <div id="MENU">
            <button id=".assets">assets</button>
            <button id=".land">land</button>
            <button id=".hex">hex</button>
        </div>

        <div id="AUTH" style="display: none;">
            <form id=".reg" name="registration" style="display: none;">
                <ul>
                    <li><label for="username">Name:</label></li>
                    <li><input id=".name" type="text" name="name"></li>
                    <li><label for="email">Email:</label></li>
                    <li><input id=".email" type="email" name="email"></li>
                    <li><label for="password">Password:</label></li>
                    <li><input id=".pass" type="password" name="password"></li>
                    <li><input id=".btn" type="submit" name="submit" value="Submit"></li>
                </ul>
                <button id=".switch_login">login</button>
            </form>

            <form id=".login" name="login" style="display: none;">
                <ul>
                    <li><label for="email">Email:</label></li>
                    <li><input id=".email" type="email" name="email"></li>
                    <li><label for="password">Password:</label></li>
                    <li><input id=".pass" type="password" name="password"></li>
                    <li><input id=".btn" type="submit" name="submit" value="Submit"></li>
                </ul>
                <button id=".switch_reg">reg</button>
            </form>
        </div>

        <div id="ASSETS" component="dialog" class="dialog_window" style="display:none;">
            <div class="dialog">
                <div>
                    <div id=".tab_btn1" class="tab">Library</div>
                    <div id=".tab_btn2" class="tab">Textures</div>
                    <div id=".tab_btn3" class="tab">Models</div>
                    <div class="title">Assets</div>
                    <div class="close"></div>
                </div>           
                
                <div>

                    <div id=".LIBRARY">
                        <div id=".list" component="list"></div>
                        <div id=".edit">
                            <div>
                                <input id=".oldgroup" type="text" disabled style="display: none;">
                                <input id=".oldname" type="text" disabled>
                                <input id=".group" type="text" list="library_group_names" placeholder="group">
                                <datalist id="library_group_names"></datalist>
                                <input id=".name" type="text" placeholder="name">
                                <button id=".add">add</button>
                                <button id=".change">change</button>
                                <button id=".delete">del</button>
                            </div>
                            <div>
                                <textarea id=".prop"></textarea>
                            </div>
                            <div>
                                <textarea id=".info"></textarea>
                            </div>
                            <div>
                                <button id=".from_model">from model editor</button>
                            </div>
                            <div>
                                <textarea id=".asset"></textarea>
                            </div>

                        </div>
                    </div>

                    <div id=".TEXTURES">
                        <div id=".groups" component="list">
                        </div>
                        <div id=".list">
                            <template id="txt_preview">
                                <div class="item" data-n="${this.n}">
                                    <img src="t/preview/${this.n}.png${this.a}">
                                    <span>${this.t}</span>
                                </div>
                            </template>
                        </div>
                    </div>

                    <div id=".MODELS">

                        <div id=".groups" component="list">
                        </div>
                        <div id=".list">
                            <template id="model_preview">
                                <div class="item" data-n="${this.n}">
                                    <img src="m/preview/${this.n}.png${this.a}">
                                    <span>${this.t}</span>
                                </div>
                            </template>
                        </div>

                    </div>

                </div>

                <div>
                    <div>
                        <button id=".lib_sel">select</button>
                    </div>
                    <div>
                        <button id=".txt_add">add</button>
                        <button id=".txt_edt">edit</button>
                        <button id=".txt_sel">select</button>
                    </div>
                    <div>
                        <button id=".model_add">add</button>
                        <button id=".model_edt">edit</button>
                        <button id=".model_sel">select</button>
                    </div>
                </div>
                
            </div>
        </div>        
        
        <div id="TXT_LOAD" component="dialog" class="dialog_window" style="display: none;">
            <div class="dialog">
                <div>
                    <div id=".tab_btn1" class="tab">Load</div>
                    <div id=".tab_btn2" class="tab">Env</div>
                    <div class="title">Texture loader</div>
                    <div class="close"></div>
                </div> 
    
                <div>
                    <div style="display: flex;overflow: auto;">
                        <div style="width:150px;margin:5px 5px 5px 5px;">
                            <label class="file_btn">...
                                <input id=".file" type="file">
                            </label>
                            <div id=".file_name" style="overflow-wrap: anywhere"></div>
                            <div id=".o_size"></div>
    
                            <input id=".n" type="number" value=1 disabled>
    
                            <input id=".group" type="text" list="textures_group_names" placeholder="group">
                            <datalist id="textures_group_names"></datalist>
                            <input id=".name" type="text"  placeholder="name">
                            <input id=".width" type="number">
                            x
                            <input id=".height" type="number">
    
                            <div>
                                format:
                                <select id=".type">
                                    <option value=0>ETC1S</option>
                                    <option value=1>UASTC</option>
                                    <option value=2>PNG</option>
                                </select>
                            </div>
                            <div>
                                mapping:
                                <select id=".mapping">
                                    <option value=0>UVMapping</option>
                                    <option value=1>CubeUVReflection</option>
                                </select>
                            </div>

    
                            <label>alpha:<input id=".alpha" type="checkbox"></label>
                            <label>mipmap:<input id=".mipmap" type="checkbox"></label>
                            <label>normalmap:<input id=".normalmap" type="checkbox"></label>
                               
                            <button id=".save">save</button>
                        </div>
                        <div style="flex-grow:1;overflow: auto;margin:5px 5px 5px 0;">
                            <img id=".img" style="max-width: 512px;max-height: 512px;">
                        </div>
                    </div>      

                    <div id=".ENV">
                        
                        <div id=".cube">
                            <div></div>
                            <div>
                                <img id=".py" data-n="0" src="">
                                <span>Y+</span>
                            </div>
                            <div></div>
                            <div></div>

                            <div>
                                <img id=".nx" data-n="0" src="">
                                <span>X-</span>
                            </div>
                            <div>
                                <img id=".nz" data-n="0" src="">
                                <span>Z-</span>
                            </div>
                            <div>
                                <img id=".px" data-n="0" src="">
                                <span>X+</span>
                            </div>
                            <div>
                                <img id=".pz" data-n="0" src="">
                                <span>Z+</span>
                            </div>
                            <div></div>
                            <div>
                                <img id=".ny" data-n="0" src="">
                                <span>Y-</span>
                            </div>
                            <div></div>
                            <div></div>
                        </div>
                        <button id=".generate">generate</button>

                    </div>
                </div>

                <div>
                    <div>
                        <button id=".lib_sel">select</button>
                    </div>
                    <div>
                        <button id=".txt_add">add</button>
                        <button id=".txt_edt">edit</button>
                        <button id=".txt_sel">select</button>
                    </div>
                </div>
            </div>
        </div>   

        <div id="MODEL_EDIT" component="dialog" class="dialog_window" style="display: none; left:0px; top:100px; width:320px; height:600px;">
            <div class="dialog">
                <div>
                    <div class="title">Model</div>
                    <div class="close"></div>
                </div> 

                <div>
                    <div>
                        <label class="file_btn">...
                            <input id=".file" type="file">
                        </label>
                        <input id=".n" type="number" disabled>
                        <input id=".group" type="text" list="models_group_names" placeholder="group">
                        <datalist id="models_group_names"></datalist>

                        <input id=".name" type="text">
                        |
                        <button id=".bhide">hide</button>
                    </div>
                    <div>
                        <div id=".vis">
                            scale:<input id=".scale" type="number" value=1>
                            |
                            <button id=".switch">hide/show</button>
                            <button id=".switchall">all</button>
                        </div>
                        <div id=".scene" component="list">
                        </div>
                        <div id=".tabs">
                            <button id=".t_material">material</button>
                            <button id=".t_transform">transform</button>
                            <button id=".t_animations">animations</button>
                            <button id=".t_scripts">scripts</button>
                        </div>
                        <div id=".material">
                            <table>
                                <tr>
                                    <td>material:</td>
                                    <td>
                                        <select id=".material">
                                            <option value="MeshBasicMaterial">Basic</option>
                                            <option value="MeshStandardMaterial">Standard</option>
                                            <option value="Grass">Grass</option>
                                        </select>
                                    </td>
                                    <td><button id=".clear">x</button></td>
                                </tr>
                            </table>
                            <table>
                                <tr>
                                    <td>defuse</td>
                                    <td>normals</td>
                                    <td>arm</td>
                                    <td>env</td>
                                </tr>
                                <tr>
                                    <td>
                                        <img id=".defuse" data-n="0" src="">
                                    </td>
                                    <td>    
                                        <img id=".normals" data-n="0" src="">
                                    </td>
                                    <td>
                                        <img id=".arm" data-n="0" src="">
                                    </td>	
                                    <td>
                                        <img id=".env" data-n="0" src="">
                                    </td>	
                                </tr>
                            </table>
                            <table>
                                <tr>
                                    <td>metalness:</td>
                                    <td>
                                        <input id=".metalness" type="number" value="0" step="0.1">
                                    </td>
                                    <td>roughness:</td>
                                    <td>
                                        <input id=".roughness" type="number" value="0" step="0.1">
                                    </td>
                                </tr>
                                <tr>
                                    <td>transparent:</td>
                                    <td>
                                        <input id=".transparent" type="checkbox">
                                    </td>
                                    <td>double side:</td>
                                    <td>
                                        <input id=".dside" type="checkbox">
                                    </td>
                                </tr>
                                <tr>
                                    <td>alpha test:</td>
                                    <td>
                                        <input id=".alphatest" type="number" value="0" step="0.1">
                                    </td>
                                </tr>
                            </table>
                            <button id=".apply">применить</button>
                        </div>
                        <div id=".transform">
                            <table>
                            <tr>
                                <td>
                                    scale:
                                </td>
                                <td>
                                    <input id=".s_x" type="number" value="1.0">
                                    <input id=".s_y" type="number" value="1.0">
                                    <input id=".s_z" type="number" value="1.0">
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    pos:
                                </td>
                                <td>
                                    <input id=".p_x" type="number" value="0.0">
                                    <input id=".p_y" type="number" value="0.0">
                                    <input id=".p_z" type="number" value="0.0">
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    rot:
                                </td>
                                <td>
                                    <input id=".r_x" type="number" value="0.0">
                                    <input id=".r_y" type="number" value="0.0">
                                    <input id=".r_z" type="number" value="0.0">
                                </td>
                            </tr>
                            </table>
                            <button id=".clean">С‡РёСЃС‚РєР°</button>
                            <button id=".remove_group">СѓР±СЂР°С‚СЊ РіСЂСѓРїРїСѓ</button>
                        </div>
                        <div id=".animations">
                            <div>
                                <select id=".list"></select>
                            </div>
                            <button id=".play">play</button>
                            <button id=".stop">stop</button>
                            <button id=".mem">mem</button>
                            <div>
                                <input id=".new_name" type="text">
                                <button id=".rename">rename</button>
                            </div>
                        </div>
                        <div id=".scripts">
                            <input id=".title" type="text" list="generator_scripts" placeholder="name">
                            <datalist id="generator_scripts"></datalist>
                            <div>
                                <textarea id=".params">

                                </textarea>
                            </div>
                            <button id=".seed">seed</button>
                            <button id=".run">run</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div id="LAND" component="dialog" class="dialog_window" style="display: none; left:0px; top:100px; width:320px; height:600px;">
            <div class="dialog">
                <div>
                    <div id=".tab_btn1" class="tab">Paint</div>
                    <div id=".tab_btn2" class="tab">Height</div>
                    <div id=".tab_btn3" class="tab">Conf</div>
                    <div class="title">LAND</div>
                    <div class="close"></div>
                </div>           
                
                <div>
                    <div id=".PAINT"> 
                        <div id=".conf">
                            size:<input id=".size" type="number" min=0.5 max=6 step=0.5 value=4>
                            <button id=".btn_rep">r</button>
                            <button id=".btn_add">+</button>
                            <button id=".btn_del">-</button>
                            |
                            <button id=".btn_save">save</button>
                        </div>
                        <div id=".masks">
                            <template id="mask_preview">
                                <img data-n="${this.n}" src="/t/masks/${this.n}.png">
                            </template>
                        </div>
                        <div id=".tiles">
                            <template id="tile_preview">
                                <img data-n="${this.i}" src="/t/preview/${this.n}.png">
                            </template>
                        </div>

                    </div>

                    <div id=".HM">
                        <div id=".conf">
                            <div id=".info">

                            </div>
                            size:<input id=".size" type="number" min=0.5 max=100 step=0.5 value=1.5>
                            power:<input id=".power" type="number" min=0.001 max=1 step=0.05 value=0.1>
                            solid:<input id=".height" type="number" min=-1.0 max=1 step=0.01 value=0>
                            <div>
                                <button id=".add">add</button>
                                <button id=".sub">sub</button>
                                <button id=".solid">solid</button>
                                <button id=".blur">blur</button>
                                |
                                <button id=".btn_save">save</button>
                            </div>
                        </div>
                        <div id=".masks">
                        </div>
                        <div id=".tools">
                            <div>
                                gray:
                                <label class="file_btn">
                                    ...
                                    <input id=".loadgray" type="file">
                                </label>
                            </div>
                        </div>
                    </div>


                    <div id=".CONF">
                        <div id=".btns">
                            <button id=".save">save</button>
                        </div>
                        <div id=".chunks">
                            chunks:
                            <div id=".info"></div>
                            <div>
                                size:
                                <div>
                                    <input id=".chunkscount_range" class="range_input"  type="range"  min=1 max=512 step=1 value=4>
                                    <input id=".chunkscount_input" class="number_input" type="number" min=1 max=512 step=1 value=4>
                                </div>
                                width:
                                <div>
                                    <input id=".chunkwidth_range" class="range_input"  type="range"  min=0.1 max=128 step=0.1 value=9>
                                    <input id=".chunkwidth_input" class="number_input" type="number" min=0.1 max=128 step=0.1 value=9>
                                </div>
                                view size:
                                <div>
                                    <input id=".viewsize_range" class="range_input"  type="range"  min=1 max=512 step=1 value=4>
                                    <input id=".viewsize_input" class="number_input" type="number" min=1 max=512 step=1 value=4>
                                </div>
                            </div>                            
                        </div>

                        <div id=".layers">
                            paint:
                            <div>
                                grid cx:
                                <div>
                                    <input id=".gridcx_range" class="range_input"  type="range"  min=1 max=128 step=1 value="8">
                                    <input id=".gridcx_input" class="number_input" type="number" min=1 max=128 step=1 value="8">
                                </div>
                                texture0 scale:
                                <div>
                                    <input id=".texture0scale_range" class="range_input"  type="range"  min=0.1 max=64 step=0.1 value="8">
                                    <input id=".texture0scale_input" class="number_input" type="number" min=0.1 max=64 step=0.1 value="8">
                                </div>
                                texture1 scale:
                                <div>
                                    <input id=".texture1scale_range" class="range_input"  type="range"  min=0.1 max=64 step=0.1 value="8">
                                    <input id=".texture1scale_input" class="number_input" type="number" min=0.1 max=64 step=0.1 value="8">
                                </div>
                                texture size:
                                <div>
                                    <select id=".size">
                                        <option value="64">64</option>
                                        <option value="128">128</option>
                                        <option value="256">256</option>
                                        <option value="512">512</option>
                                        <option value="1024">1024</option>
                                        <option value="2048">2048</option>
                                        <option value="4096">4096</option>
                                        <option value="8192">8192</option>
                                    </select>
                                </div>
                                normal:
                                <div>
                                    <input id=".normalf_range" class="range_input"  type="range"  min=0.01 max=2 step=0.01 value="0.04">
                                    <input id=".normalf_input" class="number_input" type="number" min=0.01 max=2 step=0.01 value="0.04">
                                </div>
                                <button id=".restore">restore</button>
                            </div>
    
                        </div>

                        <div id=".hm">
                            heightmap:
                            <div>
                                maxHeight
                                <div>
                                    <input id=".maxheight_range" class="range_input"  type="range"  min=1 max=512 step=1 value="8">
                                    <input id=".maxheight_input" class="number_input" type="number" min=1 max=512 step=1 value="8">
                                </div>
                                grid cx:
                                <div>
                                    <input id=".gridcx_range" class="range_input"  type="range"  min=1 max=512 step=1 value="32">
                                    <input id=".gridcx_input" class="number_input" type="number" min=1 max=512 step=1 value="32">
                                </div>
                                <button id=".restore">restore</button>
                            </div>
    
                        </div>

                        <div id=".tools">
                            <button id=".paint_clear_all">paint clear all</button>
                        </div>

                    </div>

                </div>

                <div style="display: none;">
                    <div>                        
                    </div>
                    <div>
                    </div>
                    <div>
                    </div>
                </div>
                
            </div>
        </div>        
        
        <div id="HEXGRID" component="dialog" class="dialog_window" style="display: none; left:0; top:100px; width:280px; height:600px;">
            <div class="dialog">

                <div>
                    <div id=".tab_btn1" class="tab">Grid</div>
                    <div id=".tab_btn3" class="tab">Conf</div>
                    <div class="title">HEXGRID</div>
                    <div class="close"></div>
                </div> 

                <div>
                    <div id=".edit">
                        <div id=".info">

                        </div>
                        <div>
                            <button id=".btn_save">save</button>
                            |
                            <button id=".btn_add">+</button>
                            <button id=".btn_del">-</button>
                        </div>
                        <div>
                            <select id=".list" size="10">
                            </select>
                        </div>
                        <div id=".props">
                            <table>
                                <thead>
                                    <tr>
                                        <th>name</th><th>value</th>
                                    </tr>
                                </thead>
                                <tbody id=".table">
                                </tbody>
                            </table>
                        </div>
                        <div>
                            <button id=".fill_add">+</button>
                            <button id=".fill_del">-</button>
                            <button id=".fill_clear">clear</button>
                            <select id=".fill_list" size="5">
                            </select>
                            <label>
                                fill
                                <input id=".fill_active" name="fill" type="checkbox">
                            </label>
                            <label>
                                empty
                                <input id=".fill_empty" name="empty" type="checkbox" checked>
                            </label>
                            <br>
                            <label>
                                clear
                                <input id=".fill_clean" name="clean" type="checkbox">
                            </label>
            
                            <button id=".generator">generate</button>
                            <button id=".clearall">clear map</button>
                        </div>
                    </div>

                    <div id=".conf">
                        <div>
                            <button id=".save">save</button>
                            <div id=".info">

                            </div>
                            hex:
                            <div>
                                <input id=".color" type="color" value="#ffffff">
                                <input id=".scale_range" class="range_input"  type="range"  min=0.1 max=32 step=0.01 value=1>
                                <input id=".scale_input" class="number_input" type="number" min=0.1 max=32 step=0.01 value=1>
                            </div>
                            intensity:
                            <div>
                                <input id=".intensity_range" class="range_input"  type="range"  min=0.0 max=1 step=0.01 value=1>
                                <input id=".intensity_input" class="number_input" type="number" min=0.0 max=1 step=0.01 value=1>
                            </div>
                            line width:
                            <div>
                                <input id=".linew_range" class="range_input"  type="range"  min=1 max=64 step=0.1 value=1>
                                <input id=".linew_input" class="number_input" type="number" min=1 max=64 step=0.1 value=1>
                            </div>
                            hex scale:
                            <div>
                                <input id=".hexscale_range" class="range_input"  type="range"  min=0.1 max=1 step=0.01 value=1>
                                <input id=".hexscale_input" class="number_input" type="number" min=0.1 max=1 step=0.01 value=1>
                            </div>
                            texture size:
                            <div>
                                <select id=".twidth">
                                    <option value="64">64</option>
                                    <option value="128">128</option>
                                    <option value="256">256</option>
                                    <option value="512">512</option>
                                    <option value="1024">1024</option>
                                    <option value="2048">2048</option>
                                    <option value="4096">4096</option>
                                </select>
                            </div>
                            blur:
                            <div>
                                <input id=".blur_range" class="range_input"  type="range"  min=0 max=10 step=0.01 value=1>
                                <input id=".blur_input" class="number_input" type="number" min=0 max=10 step=0.01 value=1>
                            </div>
                            <button id=".create">create</button>
                        </div>
                        
                    </div>
                </div>

                <div style="display:none">
                    <div></div>
                    <div></div>
                </div>

            </div>
        </div> 

    </body>      
</html>